# REGLAS DEL PROYECTO LUKESS HOME - LANDING PAGE

## ğŸ¯ InformaciÃ³n del Proyecto
- **Nombre**: Lukess Home Landing Page
- **Stack**: Next.js 16, TypeScript, Tailwind CSS, Framer Motion
- **PropÃ³sito**: E-commerce + showcase para tienda de ropa masculina
- **Cliente**: Lukess Home (3 puestos en Mercado Mutualista, Santa Cruz, Bolivia)
- **IntegraciÃ³n**: Conectado con Lukess Inventory System (Supabase)

## ğŸ”— INTEGRACIÃ“N CON SISTEMA DE INVENTARIO (CRÃTICO)

### ConexiÃ³n con Supabase
```typescript
// lib/supabase/client.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

export const supabase = createClient(supabaseUrl, supabaseAnonKey)
Obtener Productos del Inventario
typescript
// app/catalogo/page.tsx (Server Component)
import { createClient } from '@/lib/supabase/server'

export default async function CatalogoPage() {
  const supabase = await createClient()
  
  const { data: products } = await supabase
    .from('products')
    .select(`
      *,
      categories(name),
      inventory(
        quantity,
        locations(name)
      )
    `)
    .eq('is_active', true)
    .order('created_at', { ascending: false })
  
  return <CatalogoClient initialProducts={products} />
}
Calcular Stock Total
typescript
function getTotalStock(product: Product): number {
  return product.inventory?.reduce((sum, inv) => sum + inv.quantity, 0) || 0
}
ğŸ›’ CARRITO DE COMPRAS (FUNCIONALIDAD CRÃTICA)
Context del Carrito
typescript
// lib/context/CartContext.tsx
'use client'
import { createContext, useContext, useState } from 'react'

type CartItem = {
  id: string
  product: Product
  quantity: number
  size?: string
  color?: string
}

type CartContextType = {
  cart: CartItem[]
  addToCart: (product: Product, quantity: number, size?: string, color?: string) => void
  removeFromCart: (productId: string) => void
  updateQuantity: (productId: string, quantity: number) => void
  clearCart: () => void
  total: number
  itemCount: number
}

const CartContext = createContext<CartContextType | undefined>(undefined)

export function CartProvider({ children }: { children: React.ReactNode }) {
  const [cart, setCart] = useState<CartItem[]>([])
  
  const addToCart = (product, quantity, size, color) => {
    const existingItem = cart.find(item => 
      item.product.id === product.id && 
      item.size === size && 
      item.color === color
    )
    
    if (existingItem) {
      updateQuantity(existingItem.id, existingItem.quantity + quantity)
    } else {
      setCart([...cart, { 
        id: `${product.id}-${size}-${color}`, 
        product, 
        quantity, 
        size, 
        color 
      }])
    }
  }
  
  const total = cart.reduce((sum, item) => sum + (item.product.price * item.quantity), 0)
  const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0)
  
  return (
    <CartContext.Provider value={{ cart, addToCart, removeFromCart, updateQuantity, clearCart, total, itemCount }}>
      {children}
    </CartContext.Provider>
  )
}

export const useCart = () => {
  const context = useContext(CartContext)
  if (!context) throw new Error('useCart must be used within CartProvider')
  return context
}
BotÃ³n "Agregar al Carrito"
typescript
<button
  onClick={() => addToCart(product, 1, selectedSize, selectedColor)}
  disabled={getTotalStock(product) === 0}
  className={`
    w-full py-3 rounded-lg font-semibold transition-all
    ${getTotalStock(product) > 0 
      ? 'bg-gradient-to-r from-primary-600 to-primary-700 text-white hover:from-primary-700 hover:to-primary-800' 
      : 'bg-gray-200 text-gray-500 cursor-not-allowed'
    }
  `}
>
  {getTotalStock(product) > 0 ? 'Agregar al Carrito' : 'Sin Stock'}
</button>
ğŸ’³ PROCESO DE PAGO CON QR (YOLO PAGO)
Modal de Checkout
typescript
// components/checkout/CheckoutModal.tsx
'use client'
import { useState } from 'react'
import { useCart } from '@/lib/context/CartContext'
import Image from 'next/image'

export function CheckoutModal({ isOpen, onClose }) {
  const { cart, total, clearCart } = useCart()
  const [customerData, setCustomerData] = useState({
    name: '',
    phone: '',
    email: ''
  })
  const [step, setStep] = useState<'form' | 'qr' | 'success'>('form')
  const [orderId, setOrderId] = useState('')
  
  const handleSubmit = async () => {
    // 1. Crear orden en Supabase (tabla 'orders')
    const { data: order } = await supabase.from('orders').insert({
      customer_name: customerData.name,
      customer_phone: customerData.phone,
      customer_email: customerData.email,
      subtotal: total,
      total,
      status: 'pending',
      payment_method: 'qr'
    }).select().single()
    
    // 2. Crear items de la orden
    const orderItems = cart.map(item => ({
      order_id: order.id,
      product_id: item.product.id,
      quantity: item.quantity,
      unit_price: item.product.price,
      size: item.size,
      color: item.color,
      subtotal: item.product.price * item.quantity
    }))
    
    await supabase.from('order_items').insert(orderItems)
    
    setOrderId(order.id)
    setStep('qr')
  }
  
  return (
    <Modal isOpen={isOpen} onClose={onClose}>
      {step === 'form' && (
        <div>
          <h2>Datos de Contacto</h2>
          <input 
            placeholder="Nombre completo"
            value={customerData.name}
            onChange={(e) => setCustomerData({...customerData, name: e.target.value})}
          />
          <input 
            placeholder="TelÃ©fono (WhatsApp)"
            value={customerData.phone}
            onChange={(e) => setCustomerData({...customerData, phone: e.target.value})}
          />
          <button onClick={handleSubmit}>Continuar al Pago</button>
        </div>
      )}
      
      {step === 'qr' && (
        <div className="text-center">
          <h2>Escanea el QR para Pagar</h2>
          <Image 
            src="/qr-yolo-pago.png" 
            alt="QR Yolo Pago" 
            width={300} 
            height={300}
            className="mx-auto"
          />
          <p className="text-2xl font-bold text-primary-600 my-4">
            Total: Bs {total.toFixed(2)}
          </p>
          <p className="text-sm text-gray-600">
            Una vez realizado el pago, te contactaremos por WhatsApp
          </p>
          <button onClick={() => { setStep('success'); clearCart(); }}>
            Ya PaguÃ©
          </button>
        </div>
      )}
      
      {step === 'success' && (
        <div className="text-center">
          <CheckCircle className="w-20 h-20 text-green-500 mx-auto" />
          <h2>Â¡Orden Confirmada!</h2>
          <p>Orden #{orderId.slice(0, 8)}</p>
          <p>Te contactaremos pronto por WhatsApp</p>
        </div>
      )}
    </Modal>
  )
}
ğŸ” BUSCADOR DE PRODUCTOS
Componente SearchBar
typescript
// components/search/SearchBar.tsx
'use client'
import { useState, useEffect } from 'react'
import { Search, X } from 'lucide-react'
import { useRouter } from 'next/navigation'

export function SearchBar() {
  const [query, setQuery] = useState('')
  const [results, setResults] = useState<Product[]>([])
  const [isOpen, setIsOpen] = useState(false)
  const router = useRouter()
  
  useEffect(() => {
    if (query.length < 2) {
      setResults([])
      return
    }
    
    const searchProducts = async () => {
      const { data } = await supabase
        .from('products')
        .select('*, inventory(quantity)')
        .or(`name.ilike.%${query}%,sku.ilike.%${query}%,brand.ilike.%${query}%`)
        .eq('is_active', true)
        .limit(5)
      
      setResults(data || [])
    }
    
    const debounce = setTimeout(searchProducts, 300)
    return () => clearTimeout(debounce)
  }, [query])
  
  return (
    <div className="relative">
      <div className="relative">
        <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" />
        <input
          type="text"
          placeholder="Buscar productos..."
          value={query}
          onChange={(e) => { setQuery(e.target.value); setIsOpen(true); }}
          className="w-full pl-10 pr-10 py-3 rounded-lg border-2 border-gray-200 focus:border-primary-500"
        />
        {query && (
          <button onClick={() => { setQuery(''); setResults([]); }} className="absolute right-3 top-1/2 -translate-y-1/2">
            <X className="text-gray-400 hover:text-gray-600" />
          </button>
        )}
      </div>
      
      {isOpen && results.length > 0 && (
        <div className="absolute top-full mt-2 w-full bg-white rounded-lg shadow-xl border-2 border-gray-100 z-50">
          {results.map(product => (
            <button
              key={product.id}
              onClick={() => { router.push(`/producto/${product.id}`); setIsOpen(false); }}
              className="w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-50"
            >
              <img src={product.image_url} className="w-12 h-12 object-cover rounded" />
              <div className="text-left">
                <p className="font-semibold">{product.name}</p>
                <p className="text-sm text-gray-600">Bs {product.price}</p>
              </div>
            </button>
          ))}
        </div>
      )}
    </div>
  )
}
ğŸ“‚ Estructura de Carpetas (Actualizada)
text
app/
â”œâ”€â”€ layout.tsx                 # Root + CartProvider
â”œâ”€â”€ page.tsx                   # Landing page
â”œâ”€â”€ catalogo/
â”‚   â””â”€â”€ page.tsx              # CatÃ¡logo completo con filtros
â”œâ”€â”€ producto/
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx          # Detalle de producto individual
â””â”€â”€ api/
    â””â”€â”€ webhook-yolo/
        â””â”€â”€ route.ts          # Webhook para confirmar pago (futuro)

components/
â”œâ”€â”€ home/                     # Secciones landing
â”œâ”€â”€ search/
â”‚   â””â”€â”€ SearchBar.tsx        # Buscador global
â”œâ”€â”€ cart/
â”‚   â”œâ”€â”€ CartButton.tsx       # Ãcono con badge de cantidad
â”‚   â”œâ”€â”€ CartDrawer.tsx       # Drawer lateral con items
â”‚   â””â”€â”€ CheckoutModal.tsx    # Proceso de pago
â””â”€â”€ producto/
    â””â”€â”€ ProductDetail.tsx    # Vista detallada

lib/
â”œâ”€â”€ context/
â”‚   â””â”€â”€ CartContext.tsx      # Estado global del carrito
â””â”€â”€ supabase/
    â”œâ”€â”€ client.ts
    â””â”€â”€ server.ts
ğŸ¨ Paleta de Colores
css
Primary (Teal - Color de marca):
- primary-500: #21808D
- primary-600: #1b6a75
- primary-700: #16555d

WhatsApp:
- whatsapp: #25D366
- whatsapp-dark: #1DA851

Accent (Dorado - Lujo):
- accent-500: #D4AF37
- accent-600: #c09825

Estados:
- success: #10b981 (green-500)
- error: #ef4444 (red-500)
- warning: #f59e0b (amber-500)
- info: #3b82f6 (blue-500)
ğŸ¯ Reglas de Contraste (CRÃTICO)
âŒ NUNCA HACER:
tsx
// Gradiente sin text-white
<button className="bg-gradient-to-r from-primary-600 to-primary-700">

// Texto claro sobre fondo claro
<div className="bg-white text-gray-100">

// Sin hover states
<button className="bg-primary-600">
âœ… SIEMPRE HACER:
tsx
// Gradiente con text-white explÃ­cito
<button className="bg-gradient-to-r from-primary-600 to-primary-700 text-white hover:from-primary-700 hover:to-primary-800">

// Contraste correcto
<div className="bg-primary-50 text-primary-900">

// Hover states visibles
<button className="bg-primary-600 text-white hover:bg-primary-700 transform hover:scale-105">
ğŸ“± RESPONSIVE DESIGN
Breakpoints Tailwind
sm: 640px (mÃ³viles grandes)

md: 768px (tablets)

lg: 1024px (laptops)

xl: 1280px (desktops)

Mobile-First Approach
tsx
// Grid responsive
<div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">

// Padding responsivo
<div className="px-4 sm:px-6 lg:px-8">

// Texto responsivo
<h1 className="text-2xl sm:text-3xl lg:text-4xl font-bold">
ğŸš¨ Validaciones CrÃ­ticas
Stock Disponible
typescript
// Antes de agregar al carrito
const stock = getTotalStock(product)
if (quantity > stock) {
  toast.error(`Solo hay ${stock} unidades disponibles`)
  return
}
Campos Requeridos en Checkout
typescript
const requiredFields = ['name', 'phone']
const isValid = requiredFields.every(field => customerData[field]?.trim())

if (!isValid) {
  toast.error('Por favor completa todos los campos')
  return
}
Formato de TelÃ©fono Boliviano
typescript
// +591 7XXXXXXX
const phoneRegex = /^(\+591)?\d{7}$/
if (!phoneRegex.test(phone)) {
  toast.error('NÃºmero de telÃ©fono invÃ¡lido (ej: 76020369)')
  return
}
ğŸ”— IntegraciÃ³n con WhatsApp
Mensaje de Consulta por Producto
typescript
const whatsappMessage = encodeURIComponent(
  `Hola! Estoy interesado en:\n\n` +
  `ğŸ“¦ ${product.name}\n` +
  `ğŸ’° Precio: Bs ${product.price}\n` +
  `ğŸ“ Talla: ${selectedSize || 'A consultar'}\n` +
  `ğŸ¨ Color: ${selectedColor || 'A consultar'}\n\n` +
  `Â¿Tienen disponible?`
)

const whatsappUrl = `https://wa.me/59176020369?text=${whatsappMessage}`
Mensaje Post-Compra
typescript
const orderMessage = encodeURIComponent(
  `Hola! RealicÃ© un pedido #${orderId.slice(0, 8)}\n\n` +
  `Total: Bs ${total.toFixed(2)}\n` +
  `Items: ${cart.length}\n\n` +
  `Ya realicÃ© el pago por QR. Â¿Pueden confirmar?`
)
ğŸ¬ Animaciones con Framer Motion
Fade In al Scroll
typescript
import { motion } from 'framer-motion'
import { useInView } from 'react-intersection-observer'

export function AnimatedSection({ children }) {
  const [ref, inView] = useInView({ triggerOnce: true, threshold: 0.1 })
  
  return (
    <motion.div
      ref={ref}
      initial={{ opacity: 0, y: 50 }}
      animate={inView ? { opacity: 1, y: 0 } : { opacity: 0, y: 50 }}
      transition={{ duration: 0.6, ease: 'easeOut' }}
    >
      {children}
    </motion.div>
  )
}
ğŸ“Š Schema de Base de Datos (Nuevas Tablas)
sql
-- Ã“rdenes de clientes (compras online)
CREATE TABLE orders (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  customer_name TEXT NOT NULL,
  customer_phone TEXT NOT NULL,
  customer_email TEXT,
  subtotal NUMERIC(10,2) NOT NULL,
  discount NUMERIC(10,2) DEFAULT 0,
  total NUMERIC(10,2) NOT NULL,
  status TEXT DEFAULT 'pending', -- pending, paid, confirmed, shipped, completed, cancelled
  payment_method TEXT DEFAULT 'qr',
  payment_proof TEXT, -- URL de captura de pantalla del pago
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Items de cada orden
CREATE TABLE order_items (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  order_id UUID REFERENCES orders(id) ON DELETE CASCADE,
  product_id UUID REFERENCES products(id) ON DELETE RESTRICT,
  quantity INTEGER NOT NULL CHECK (quantity > 0),
  unit_price NUMERIC(10,2) NOT NULL,
  size TEXT,
  color TEXT,
  subtotal NUMERIC(10,2) NOT NULL
);
ğŸš¨ Problemas Comunes y Soluciones
"Productos no se sincronizan con inventario"
Causa: No estÃ¡s usando Supabase Realtime
SoluciÃ³n:

typescript
useEffect(() => {
  const channel = supabase
    .channel('products-changes')
    .on('postgres_changes', { 
      event: '*', 
      schema: 'public', 
      table: 'products' 
    }, (payload) => {
      // Actualizar estado local
      setProducts(prev => /* logic */)
    })
    .subscribe()
  
  return () => { supabase.removeChannel(channel) }
}, [])
"Carrito se pierde al recargar"
Causa: No persistes en localStorage
SoluciÃ³n:

typescript
// En CartContext
useEffect(() => {
  localStorage.setItem('cart', JSON.stringify(cart))
}, [cart])

useEffect(() => {
  const saved = localStorage.getItem('cart')
  if (saved) setCart(JSON.parse(saved))
}, [])
"Stock negativo despuÃ©s de venta"
Causa: No validas antes de confirmar
SoluciÃ³n: Siempre hacer SELECT antes de UPDATE

typescript
const { data: current } = await supabase
  .from('inventory')
  .select('quantity')
  .eq('product_id', productId)
  .single()

if (current.quantity < orderQuantity) {
  toast.error('Stock insuficiente')
  return
}
ğŸ“¦ Variables de Entorno
text
# .env.local
NEXT_PUBLIC_SUPABASE_URL=https://lrcggpdgrqltqbxqnjgh.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
NEXT_PUBLIC_WHATSAPP_NUMBER=59176020369
NEXT_PUBLIC_SITE_URL=https://lukess-home.vercel.app
ğŸ¯ Checklist Pre-Deploy
 Todas las imÃ¡genes optimizadas (WebP)

 Variables de entorno configuradas

 Supabase RLS policies activas

 WhatsApp con nÃºmero correcto

 QR de Yolo Pago en /public/qr-yolo-pago.png

 Redes sociales (solo TikTok y WhatsApp)

 Facebook/Instagram ELIMINADOS del footer

 IDs de navegaciÃ³n consistentes

 SEO metadata completo

 Sitemap.xml generado

 Analytics configurado (opcional)

ğŸš€ Comandos de Desarrollo
bash
npm run dev      # Desarrollo local
npm run build    # Build de producciÃ³n
npm run lint     # Linter
npm run type-check # Verificar TypeScript
ğŸ“ Datos de Contacto (Negocio)
TelÃ©fono: +591 76020369

TikTok: @lukess.home

DirecciÃ³n: Mercado Mutualista, Santa Cruz, Bolivia

Horarios: Lun-SÃ¡b 8AM-10PM, Dom 9AM-9PM

âš ï¸ RECORDATORIO: Este archivo debe referenciarse al inicio de CADA prompt a Cursor con @.cursorrules.md
